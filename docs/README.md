# Matching Engine Project

本项目实现了一个基于双链表和哈希表的订单配对引擎系统，包含了订单处理、订单簿管理和交易记录生成的核心功能。

## TODO LIST

1. 对每个服务类进行测试
2. 实现logger
3. 写一个 `main.cpp`，测试整体功能
4. 为止损单做准备，观察者模块的设计
5. 止损单的逻辑实现，在 `OrderBook` 中引入回调接口
6. 测试
7. 行情接口
8. 异步设计，性能监控，并发设计，内存管理优化，精细化订单流模拟

## 模块职责

1. **MessageQueue（订单流管道）**
   - 提供接口给前段接收订单信息

2. **OrderManager（订单管理器）**
   - 从订单流管道接收message
   - 进行基本的验证与预处理，调用`MatchingEngine`的操作

3. **MatchingEngine（配对引擎）**
   - 负责接收来自 `OrderManager` 的新增订单，执行订单匹配和成交操作。在撮合过程中，`MatchingEngine` 会根据订单的匹配情况生成交易记录，并实时更新最后成交价格。如果订单部分或完全未成交，`MatchingEngine` 将调用 `OrderBook` 的接口，将剩余部分添加至订单簿。同时，`MatchingEngine` 通过观察者模式通知相关模块（如止损单触发器或行情接口）更新最新的成交价和行情信息。

4. **OrderBook（订单簿）**
   - 负责管理限价单和止损单的结构化存储，包括维护价格层次、订单链表结构以及价格到订单节点的映射。`OrderBook` 提供接口供 `OrderManager` 用于订单的增删改操作，并供 `MatchingEngine` 用于添加未成交订单。`OrderBook` 确保订单状态的高效管理，为撮合引擎提供可靠的数据支持。

## 未来计划

如果项目有足够的时间，我们可以进一步扩展系统的功能和性能：

1. **前端开发**：
   - 使用 Node.js 构建交易系统的前端，提供用户界面以便于用户下单和查看交易信息。

2. **策略验证**：
   - 尝试一些简单的动量或均值回复策略，利用系统来验证其可靠性和有效性。

3. **性能指标**：
   - **TPS（每秒事务数）**：这是配对引擎性能的重要指标。我们可以通过优化代码和硬件资源来提高系统的 TPS。
   - **大订单处理时间**：衡量系统处理大订单所需的时间，确保在高负载下系统依然高效运行。

4. **压力测试与云迁移**：
   - 将项目迁移到云端，利用更强大的多核 CPU 进行压力测试，评估系统在高并发环境下的表现。

5. **订单流模拟**：
   - 设计复杂的订单流模拟，以更真实地模拟市场环境。
   - **布朗运动**：应用布朗运动模拟连续时间下的随机订单流动态。
   - **泊松过程**：在布朗运动中引入泊松过程，模拟价格的跳跃扩散过程。
   - **机器学习方法**：采用对抗生成神经网络等机器学习方法，进一步提升订单流模拟的复杂性和真实性。

6. **系统迁移与优化**：
   - 实现异步设计、性能监控、并发处理以及内存管理优化，提升系统整体性能。

7. **高级功能开发**：
   - 实现止损单逻辑，引入回调接口以增强系统的响应能力。
   - 开发行情接口，提供实时的市场数据支持。
   - 设计精细化的订单流模拟，确保系统在各种市场条件下的稳定性和可靠性。

当前阶段，本项目的目标是开发一个只能处理限价单和市价单的配对引擎，并使用自定义的简单订单流模拟进行测试。未来的扩展计划将进一步增强系统的功能和性能，确保其在实际交易环境中的应用价值。
